



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.2">
    
    
      
        <title>Event handling - CrossForms STDLIB</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.8d40d89b.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#recommended-convention-for-new-form-modules" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../index.html" title="CrossForms STDLIB" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                CrossForms STDLIB
              </span>
              <span class="md-header-nav__topic">
                Event handling
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    CrossForms STDLIB
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../index.html" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../installation/index.html" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../devsuite-configuration/index.html" title="DevSuite configuration" class="md-nav__link">
      DevSuite configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/index.html" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../project-setup/index.html" title="Project setup" class="md-nav__link">
      Project setup
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Event handling
      </label>
    
    <a href="index.html" title="Event handling" class="md-nav__link md-nav__link--active">
      Event handling
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recommended-convention-for-new-form-modules" title="Recommended convention for new form modules" class="md-nav__link">
    Recommended convention for new form modules
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mainpks" title="main.pks" class="md-nav__link">
    main.pks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mainpkb" title="main.pkb" class="md-nav__link">
    main.pkb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event_routerpks" title="event_router.pks" class="md-nav__link">
    event_router.pks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event_routerpkb" title="event_router.pkb" class="md-nav__link">
    event_router.pkb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-form-package" title="Sample: form package" class="md-nav__link">
    Sample: form package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-item_list_ctrl-package" title="Sample: item_list_ctrl package" class="md-nav__link">
    Sample: item_list_ctrl package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recommended-convention-for-new-form-modules" title="Recommended convention for new form modules" class="md-nav__link">
    Recommended convention for new form modules
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mainpks" title="main.pks" class="md-nav__link">
    main.pks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mainpkb" title="main.pkb" class="md-nav__link">
    main.pkb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event_routerpks" title="event_router.pks" class="md-nav__link">
    event_router.pks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event_routerpkb" title="event_router.pkb" class="md-nav__link">
    event_router.pkb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-form-package" title="Sample: form package" class="md-nav__link">
    Sample: form package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-item_list_ctrl-package" title="Sample: item_list_ctrl package" class="md-nav__link">
    Sample: item_list_ctrl package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Event handling</h1>
                
                <p>To simplify event handling and delegation in PL/SQL code, STDLIB introduces the <code class="codehilite">std_event</code> struct. It contains all essential context information such as current block, current item, form name etc. </p>
<p>Instead of directly accessing slippery <code class="codehilite">SYSTEM</code> variables, you can just get the whole context of current event by initializing new struct with <code class="codehilite">std_event.new(&#39;CURRENT-EVENT-NAME&#39;)</code> call like this:</p>
<div class="codehilite"><pre><span></span><span class="k">declare</span>
  <span class="n">lc_event</span> <span class="n">constant</span> <span class="n">std</span><span class="p">.</span><span class="n">event</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_event</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;WHEN-NEW-ITEM-INSTANCE&#39;</span><span class="p">);</span>
<span class="k">begin</span>
  <span class="n">fnd_message</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="n">lc_event</span><span class="p">.</span><span class="n">block</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>

<h2 id="recommended-convention-for-new-form-modules">Recommended convention for new form modules<a class="headerlink" href="#recommended-convention-for-new-form-modules" title="Permanent link">&para;</a></h2>
<p>PL/SQL packages inside the form library:</p>
<h3 id="mainpks"><code class="codehilite">main.pks</code><a class="headerlink" href="#mainpks" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">main</span> <span class="k">as</span>

  <span class="k">procedure</span> <span class="n">event</span><span class="p">(</span><span class="n">p_event</span> <span class="k">in</span> <span class="n">std</span><span class="p">.</span><span class="n">event</span><span class="p">);</span>

<span class="k">end</span> <span class="n">main</span><span class="p">;</span>
</pre></div>

<h3 id="mainpkb"><code class="codehilite">main.pkb</code><a class="headerlink" href="#mainpkb" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">main</span> <span class="k">as</span>

  <span class="k">procedure</span> <span class="n">initialize_form</span><span class="p">;</span>

  <span class="k">procedure</span> <span class="n">event</span><span class="p">(</span><span class="n">p_event</span> <span class="k">in</span> <span class="n">std</span><span class="p">.</span><span class="n">event</span><span class="p">)</span> <span class="k">is</span>
  <span class="k">begin</span>
    <span class="k">if</span> <span class="n">p_event</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;WHEN-NEW-FORM-INSTANCE&#39;</span> <span class="k">then</span>
      <span class="n">initialize_form</span><span class="p">;</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="k">end</span> <span class="k">if</span><span class="p">;</span>

    <span class="c1">--- other</span>
  <span class="k">end</span> <span class="n">event</span><span class="p">;</span>

  <span class="k">procedure</span> <span class="n">initialize_form</span> <span class="k">is</span>
  <span class="k">begin</span>
    <span class="c1">--- some initialization logic</span>

    <span class="k">null</span><span class="p">;</span>
  <span class="k">end</span> <span class="n">event</span><span class="p">;</span>

<span class="k">begin</span>
  <span class="n">fdrcsid</span><span class="p">(</span><span class="s1">&#39;$Id$&#39;</span><span class="p">);</span>
<span class="k">end</span> <span class="n">main</span><span class="p">;</span>
</pre></div>

<h3 id="event_routerpks"><code class="codehilite">event_router.pks</code><a class="headerlink" href="#event_routerpks" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">event_router</span> <span class="k">as</span>

  <span class="k">procedure</span> <span class="n">event</span><span class="p">;</span>

  <span class="k">procedure</span> <span class="n">event</span><span class="p">(</span><span class="n">p_event_name</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">);</span>

<span class="k">end</span> <span class="n">event_router</span><span class="p">;</span>
</pre></div>

<h3 id="event_routerpkb"><code class="codehilite">event_router.pkb</code><a class="headerlink" href="#event_routerpkb" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">event_router</span> <span class="k">as</span>

  <span class="k">procedure</span> <span class="n">event</span> <span class="k">is</span>
    <span class="n">l_event</span> <span class="n">std</span><span class="p">.</span><span class="n">event</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_global_event</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
  <span class="k">begin</span>
    <span class="k">if</span> <span class="k">not</span> <span class="n">std_event</span><span class="p">.</span><span class="n">is_null</span><span class="p">(</span><span class="n">l_event</span><span class="p">)</span> <span class="k">then</span>
      <span class="n">route</span><span class="p">(</span><span class="n">l_event</span><span class="p">);</span>
    <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
  <span class="k">end</span> <span class="n">event</span><span class="p">;</span>

  <span class="k">procedure</span> <span class="n">event</span><span class="p">(</span><span class="n">p_event_name</span> <span class="n">varchar2</span><span class="p">)</span> <span class="k">is</span>
  <span class="k">begin</span>
    <span class="n">route</span><span class="p">(</span><span class="n">std_event</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="n">p_event_name</span><span class="p">));</span>
  <span class="k">end</span> <span class="n">event</span><span class="p">;</span>

  <span class="k">procedure</span> <span class="n">route</span><span class="p">(</span><span class="n">p_event</span> <span class="k">in</span> <span class="n">std</span><span class="p">.</span><span class="n">event</span><span class="p">)</span> <span class="k">is</span>
  <span class="k">begin</span>
    <span class="c1">-- delegate other events from here to other packages</span>

    <span class="cm">/* Example:</span>

<span class="cm">    item_list_ctrl.event(p_event);</span>
<span class="cm">    request_creator_ctrl.event(p_event);</span>

<span class="cm">    */</span>
  <span class="k">end</span> <span class="n">route</span><span class="p">;</span>

<span class="k">begin</span>
  <span class="n">fdrcsid</span><span class="p">(</span><span class="s1">&#39;$Id$&#39;</span><span class="p">);</span>
<span class="k">end</span> <span class="n">event_router</span><span class="p">;</span> 
</pre></div>

<p><code class="codehilite">event_router</code> package is responsible only for event delegation and should not contain any complex business logic.</p>
<p><code class="codehilite">main</code> package should contain logic which doesn't really fall into some other, less generic feature group. A good example is form initialization, pre-configuration, opening developer tools etc.</p>
<p>In order to put all of this to work, the <code class="codehilite">event_router.event(&#39;&lt;EVENT NAME&gt;&#39;);</code> call should be added to all triggers of the form module (preferably at the form level, although in some cases it might be needed to define trigger on block or item level due to weird bugs).</p>
<h3 id="sample-form-package">Sample: <code class="codehilite">form</code> package<a class="headerlink" href="#sample-form-package" title="Permanent link">&para;</a></h3>
<p><code class="codehilite">form</code> is a package with specification only, body is not needed. It is used to describe physical structure of the form in PL/SQL code using structs provided by STDLIB. </p>
<div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">form</span> <span class="k">as</span>


  <span class="k">type</span> <span class="n">t_form_items</span><span class="p">;</span>
  <span class="k">type</span> <span class="n">t_form_blocks</span><span class="p">;</span>
  <span class="k">type</span> <span class="n">t_form_canvases</span><span class="p">;</span>
  <span class="k">type</span> <span class="n">t_form_tab_pages</span><span class="p">;</span>
  <span class="k">type</span> <span class="n">t_form_visual_attributes</span><span class="p">;</span>
  <span class="k">type</span> <span class="n">t_form_windows</span><span class="p">;</span>

  <span class="k">type</span> <span class="n">b_item_list</span><span class="p">;</span>
  <span class="k">type</span> <span class="n">b_item_controls</span>


  <span class="c1">-- Main exports</span>

  <span class="n">items</span> <span class="n">t_form_items</span><span class="p">;</span>
  <span class="n">blocks</span> <span class="n">t_form_blocks</span><span class="p">;</span>
  <span class="n">canvases</span> <span class="n">t_form_canvases</span><span class="p">;</span>
  <span class="n">vattrs</span> <span class="n">t_form_visual_attributes</span><span class="p">;</span>
  <span class="n">windows</span> <span class="n">t_form_windows</span><span class="p">;</span>


  <span class="c1">-- Definitons</span>

  <span class="k">type</span> <span class="n">t_form_items</span> <span class="k">is</span> <span class="n">record</span> <span class="p">(</span>
    <span class="n">item_list</span> <span class="n">b_item_list</span><span class="p">,</span>
    <span class="n">item_controls</span> <span class="n">b_item_controls</span>
  <span class="p">);</span>

  <span class="k">type</span> <span class="n">t_form_blocks</span> <span class="k">is</span> <span class="n">record</span> <span class="p">(</span>
    <span class="n">item_list</span> <span class="n">std</span><span class="p">.</span><span class="n">block</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_block</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;item_list&#39;</span><span class="p">),</span>
    <span class="n">item_controls</span> <span class="n">std</span><span class="p">.</span><span class="n">block</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_block</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;item_controls&#39;</span><span class="p">)</span>
  <span class="p">);</span>

  <span class="k">type</span> <span class="n">t_form_canvases</span> <span class="k">is</span> <span class="n">record</span> <span class="p">(</span>
    <span class="n">main</span> <span class="n">std</span><span class="p">.</span><span class="n">canvas</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_canvas</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;main&#39;</span><span class="p">)</span>
  <span class="p">);</span>

  <span class="k">type</span> <span class="n">t_form_visual_attributes</span> <span class="k">is</span> <span class="n">record</span> <span class="p">(</span>
    <span class="n">pick_status_in_progress</span> <span class="n">std</span><span class="p">.</span><span class="n">vattr</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_vattr</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;pick_status_in_progress&#39;</span><span class="p">),</span>
    <span class="n">pick_status_completed</span> <span class="n">std</span><span class="p">.</span><span class="n">vattr</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_vattr</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;pick_status_completed&#39;</span><span class="p">),</span>
    <span class="n">status_released</span> <span class="n">std</span><span class="p">.</span><span class="n">vattr</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_vattr</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;status_released&#39;</span><span class="p">)</span>
  <span class="p">);</span>

  <span class="k">type</span> <span class="n">b_item_list</span> <span class="k">is</span> <span class="n">record</span> <span class="p">(</span>
    <span class="n">item_number</span> <span class="n">std</span><span class="p">.</span><span class="n">item</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_item</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;item_list.item_number&#39;</span><span class="p">),</span>
    <span class="n">inventory_item_id</span> <span class="n">std</span><span class="p">.</span><span class="n">item</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_item</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;item_list.inventory_item_id&#39;</span><span class="p">),</span>
    <span class="n">quantity</span> <span class="n">std</span><span class="p">.</span><span class="n">item</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_item</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;item_list.quantity&#39;</span><span class="p">)</span>
  <span class="p">);</span>

  <span class="k">type</span> <span class="n">b_item_controls</span> <span class="k">is</span> <span class="n">record</span> <span class="p">(</span>
    <span class="n">complete</span> <span class="n">std</span><span class="p">.</span><span class="n">item</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_item</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;item_controls.complete&#39;</span><span class="p">),</span>
    <span class="n">cancel</span> <span class="n">std</span><span class="p">.</span><span class="n">item</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_item</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;item_controls.cancel&#39;</span><span class="p">)</span>
  <span class="p">);</span>

  <span class="k">type</span> <span class="n">t_form_windows</span> <span class="k">is</span> <span class="n">record</span> <span class="p">(</span>
    <span class="n">main_window</span> <span class="n">std</span><span class="p">.</span><span class="n">window</span> <span class="p">:</span><span class="o">=</span> <span class="n">std_window</span><span class="p">.</span><span class="k">new</span><span class="p">(</span><span class="s1">&#39;main_window&#39;</span><span class="p">)</span>
  <span class="p">);</span>

<span class="k">end</span> <span class="n">form</span><span class="p">;</span>
</pre></div>

<h3 id="sample-item_list_ctrl-package">Sample: <code class="codehilite">item_list_ctrl</code> package<a class="headerlink" href="#sample-item_list_ctrl-package" title="Permanent link">&para;</a></h3>
<p>This is just an example package which demonstrates how to manage execution flow based on current context information.</p>
<div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">item_list_ctrl</span> <span class="k">as</span>

  <span class="k">procedure</span> <span class="n">close_modal</span><span class="p">;</span>
  <span class="k">procedure</span> <span class="n">validate_quantity</span><span class="p">;</span>
  <span class="k">procedure</span> <span class="n">complete</span><span class="p">;</span>
  <span class="k">function</span> <span class="n">is_quantity_too_high</span> <span class="k">return</span> <span class="nb">boolean</span><span class="p">;</span>

  <span class="k">procedure</span> <span class="n">event</span><span class="p">(</span><span class="n">p_event</span> <span class="k">in</span> <span class="n">std</span><span class="p">.</span><span class="n">event</span><span class="p">)</span> <span class="k">is</span>
  <span class="k">begin</span>    
    <span class="k">case</span> <span class="n">p_event</span><span class="p">.</span><span class="n">name</span> 
      <span class="k">when</span> <span class="s1">&#39;KEY-EXIT&#39;</span> <span class="k">then</span>
        <span class="k">if</span> <span class="n">std_block</span><span class="p">.</span><span class="n">is_in</span><span class="p">(</span>
          <span class="n">p_event</span><span class="p">.</span><span class="n">block</span><span class="p">,</span> 
          <span class="n">form</span><span class="p">.</span><span class="n">blocks</span><span class="p">.</span><span class="n">item_list</span><span class="p">,</span> 
          <span class="n">form</span><span class="p">.</span><span class="n">blocks</span><span class="p">.</span><span class="n">item_controls</span>
        <span class="p">)</span>
        <span class="k">then</span>
          <span class="n">close_modal</span><span class="p">();</span>
        <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
      <span class="k">when</span> <span class="s1">&#39;WHEN-VALIDATE-ITEM&#39;</span> <span class="k">then</span>
        <span class="k">if</span> <span class="n">std_item</span><span class="p">.</span><span class="k">equals</span><span class="p">(</span><span class="n">p_event</span><span class="p">.</span><span class="n">item</span><span class="p">,</span> <span class="n">form</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="n">item_list</span><span class="p">.</span><span class="n">quantity</span><span class="p">)</span> <span class="k">then</span>
          <span class="n">validate_quantity</span><span class="p">();</span>
        <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
      <span class="k">when</span> <span class="s1">&#39;WHEN-BUTTON-PRESSED&#39;</span> <span class="k">then</span>
        <span class="k">if</span> <span class="n">std_item</span><span class="p">.</span><span class="k">equals</span><span class="p">(</span><span class="n">p_event</span><span class="p">.</span><span class="n">item</span><span class="p">,</span> <span class="n">form</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="n">item_controls</span><span class="p">.</span><span class="n">complete</span><span class="p">)</span> <span class="k">then</span>
          <span class="n">complete</span><span class="p">();</span>
        <span class="k">elsif</span> <span class="n">std_item</span><span class="p">.</span><span class="k">equals</span><span class="p">(</span><span class="n">p_event</span><span class="p">.</span><span class="n">item</span><span class="p">,</span> <span class="n">form</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="n">item_controls</span><span class="p">.</span><span class="n">cancel</span><span class="p">)</span> <span class="k">then</span>
          <span class="n">close_modal</span><span class="p">();</span>
        <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
      <span class="k">else</span>
        <span class="k">null</span><span class="p">;</span>
    <span class="k">end</span> <span class="k">case</span> <span class="n">p_event</span><span class="o">#</span><span class="n">name</span><span class="p">;</span>

    <span class="p">...</span>
  <span class="k">end</span> <span class="n">event</span><span class="p">;</span>

<span class="k">end</span> <span class="n">item_list_ctrl</span><span class="p">;</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../project-setup/index.html" title="Project setup" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Project setup
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>